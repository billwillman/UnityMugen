;-------------- Generated by Fighter Factory -------------

;--------------------- Variable List ----------------------

; Var(1) - StateDef 2336, 2337, 2338, 2502, 2509, 2600, 2601, 16051, 16061, 16062, 16067, 16060, 16065, 16066, 300000, 7550, 7551, 31000, 40000, 50000
; Var(2) - StateDef 16061, 16062, 16067, 16060, 16065, 16066, 300000, 31000, 40000, 50000
; Var(3) - StateDef 300000, 40000, 50000
; Var(4) - StateDef 300000, 40000, 50000
; Var(5) - StateDef 1566, 1567, 40000, 50000
; Var(6) - StateDef 40000, 50000
; Var(7) - StateDef 8300, 8310, 8320, 40000, 50000
; Var(8) - StateDef 8300, 8310, 40000, 50000
; Var(9) - StateDef 8310, 8320, 40000, 50000
; Var(10) - StateDef 1500, 1550, 1566, 1567, 2000, 2002, 2050, 2051, 2250, 2251, 7000, 7055, 7300, 8001, 8100, 8220, 8221, 81000, 8310, 8320, 31000, 40000, 50000
; Var(11) - StateDef 8001, 8220, 8221, 10560, 8510, 8520, 31000, 40000
; Var(12) - StateDef 31000, 40000
; Var(13) - StateDef 31000, 40000
; Var(14) - StateDef 8510, 8520, 31000, 40000
; Var(15) - StateDef 1502, 1552, 8110, 40000
; Var(16) - StateDef 40000, 60000
; Var(17) - StateDef 40000, 60000
; Var(18) - StateDef 40000, 60000
; Var(19) - StateDef 40000, 60000
; Var(20) - StateDef 750, 751, 5900, -2, 950, 1000, 1050, 1100, 1150, 1200, 1250, 1300, 1340, 1360, 1320, 1400, 1450, 1500, 1550, 1600, 1650, 1700, 1750, 1800, 1850, 2000, 2050, 2100, 2150, 2200, 2250, 2300, 2350, 2500, 2800, 7000, 7001, 7055, 7100, 7101, 7300, 7200, 8000, 8100, 8200, 10085, 28000, 81000, 31000, 40000, 60000, 198964
; Var(21) - StateDef -2, 31000, 40000, 60000, 198964
; Var(22) - StateDef 31000, 40000, 198964
; Var(23) - StateDef 31000, 40000, 198964
; Var(24) - StateDef 31000, 40000, 198964
; Var(25) - StateDef 40000, 198964
; Var(26) - StateDef 40000, 198964
; Var(27) - StateDef 40000, 198964
; Var(28) - StateDef 40000, 198964
; Var(29) - StateDef 40000
; Var(30) - StateDef 2800, 40000
; Var(31) - StateDef 2800, 40000
; Var(32) - StateDef -2, 2800, 40000
; Var(33) - StateDef -2, 40000
; Var(34) - StateDef -2, 40000
; Var(35) - StateDef -2, 40000
; Var(36) - StateDef -2, 40000
; Var(37) - StateDef 4000, 4001, 4002, 4003, 4004, 4005, 40000
; Var(38) - StateDef 4500, -2, 2200, 40000
; Var(39) - StateDef 40000
; Var(40) - StateDef 0, -2, 40000
; Var(41) - StateDef 40000
; Var(42) - StateDef 10560, 8510, 40000
; Var(43) - StateDef 0, -2, 8510, 8520, 40000
; Var(44) - StateDef 0, -2, 40000
; Var(45) - StateDef 0, -2, 40000
; Var(46) - StateDef -2, 40000
; Var(47) - StateDef -2, 40000
; Var(48) - StateDef -2, 40000
; Var(49) - StateDef 40000
; Var(50) - StateDef , 191, 192, 194, 193, 5900, 1951, 1950, 1953, 1954, 31000, 40000
; Var(51) - StateDef 31000
; Var(52) - StateDef -2
; Var(53) - StateDef -2
; Var(55) - StateDef -2
; Var(56) - StateDef -2
; Var(57) - StateDef -2
; Var(58) - StateDef -2
; Var(59) - StateDef 30000, -3

;--------------------- Float Variable List ----------------------

; fVar(3) - StateDef -2
; fVar(5) - StateDef -2
; fVar(11) - StateDef 28020
; fVar(12) - StateDef 28010, 28020
; fVar(13) - StateDef 28000, 28010
; fVar(28) - StateDef -3
; fVar(29) - StateDef -3
; fVar(30) - StateDef -3
; fVar(31) - StateDef -3
; fVar(32) - StateDef -3
; fVar(35) - StateDef 2800
; fVar(36) - StateDef -3
;-------------- Generated by Fighter Factory -------------

;--------------------- Variable List ----------------------

; Var(1) - StateDef 2336, 2337, 2338, 300000
; Var(2) - StateDef 300000
; Var(3) - StateDef 300000
; Var(4) - StateDef 300000
; Var(5) - StateDef 1566, 1567
; Var(7) - StateDef 8300, 8310, 8320
; Var(8) - StateDef 8300, 8310
; Var(9) - StateDef 8310, 8320
; Var(10) - StateDef 1500, 1550, 1566, 1567, 2000, 2002, 2050, 2051, 2250, 2251, 7000, 7055, 7300, 8001, 8220, 8221, 8310, 8320
; Var(11) - StateDef 8001, 8220, 8221, 10560, 8510, 8520
; Var(14) - StateDef 8510, 8520
; Var(15) - StateDef 1502, 1552, 8110
; Var(32) - StateDef -2
; Var(33) - StateDef -2
; Var(34) - StateDef -2
; Var(35) - StateDef -2
; Var(36) - StateDef -2
; Var(37) - StateDef 4000, 4001, 4002, 4003, 4004, 4005
; Var(38) - StateDef 4500, -2, 2200
; Var(40) - StateDef 0, -2
; Var(42) - StateDef 10560, 8510
; Var(43) - StateDef 0, -2, 8510, 8520
; Var(44) - StateDef 0, -2
; Var(45) - StateDef 0, -2
; Var(46) - StateDef -2
; Var(47) - StateDef -2
; Var(48) - StateDef -2
; Var(50) - StateDef , 1951, 1950, 1953, 1954

;--------------------- Float Variable List ----------------------

[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15999999
sparkno = S4802
guard.sparkno = S4812
KO.echo = 0
volume = 50
power = 5000
intpersistindex = 50

[Size]
xscale = 1
yscale = 1
ground.back = 20
ground.front = 11
head.pos = -31,-94
mid.pos = -19,-62
air.back = 12
air.front = 11
z.width = 3
attack.width = 4,4
attack.dist = 160
proj.attack.dist = 90

[Velocity]
walk.fwd  = 3.4
walk.back = -3.1
run.fwd  = 7.1, 0
run.back = -7.5,-6.8
runjump.back = -5.55,-8.1
runjump.fwd = 6,-8.1
jump.neu = 0,-11.3
jump.back = -3.9
jump.fwd = 3.7
airjump.neu = 0,-8.1
airjump.back = -4.55
airjump.fwd = 4.5

[Movement]
airjump.num = 0
yaccel = .77
stand.friction = .82
crouch.friction = .82



;-----------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim!=0&&Anim!=1&&Anim!=2&&Anim!=4&&Anim!=5&&Anim!=6000&&Anim!=6001&&Anim!=6005&&Anim!=6004
trigger2 = (Anim = 4 || Anim = 5 || Anim = 6004 || Anim = 6005) && AnimTime = 0
value = ifelse((Var(50)>0),ifelse((Var(50)>1),ifelse((Var(50)>2),ifelse((Var(50)>3),6000,6001),2),1),0)
;IfElse((Var(50) > 0),IfElse((Var(50) > 2),6000,2),0)

[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 5 && Anim != IfElse((Var(50) = 3),6004,6005) && Var(50) > 2
value = IfElse((Var(50) = 3),6004,6005)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, Varset]
type = Varset
triggerall = 1
trigger1 = prevstateno = [180,199]
trigger2 = prevstateno = 5900
trigger3 = prevstateno = 0
var(40) = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = var(46) != 0 && var(40) != 0
trigger2 = var(46) = 0 && var(47) != 0 && var(40) != 0
value = var(40)
[State 0, Varset]
type = Varset
trigger1 = time = 1
var(43) = 0
[State 0, Varset]
type = Varset
trigger1 = time = 1
var(44) = 0
[State 0, Varset]
type = Varset
trigger1 = time = 1
var(45) = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
velset = 0,0
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6010,6001),10)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Var(50)=3
statetype = S
physics = S

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0 || (Var(50) = 3 && time = 0)
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
velset = 0,0
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6011,6001),11)
sprpriority = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Var(50)=3
statetype = S
physics = S

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = (Anim = 6 || Anim = 6004 || Anim = 6006) && AnimTime = 0
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6011,6001),11)

[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 6 && Anim != IfElse((Var(50) = 3),6004,6006) && Var(50) > 2
value = IfElse((Var(50) = 3),6004,6006)

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
velset = 0,0
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6012,6001),12)

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0 || (Var(50) = 3 && time = 0)
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 5 && Anim != IfElse((Var(50) = 3),6004,6005) && Var(50) > 2
value = IfElse((Var(50) = 3),6004,6005)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 6020 && Anim != 5 && Anim != 6005 && Anim != 4 && Anim != 6004
trigger2 = (Anim = 4 || Anim = 5 || Anim = 6004 || Anim = 6005) && AnimTime = 0
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6020,6025),20)

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 6021 && Anim != 5 && Anim != 6005 && Anim != 4 && Anim != 6004
trigger2 = (Anim = 4 || Anim = 5 || Anim = 6004 || Anim = 6005) && AnimTime = 0
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6021,6026),21)

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6040,6050),40)
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

;[State 40, 2]
;type = VarSet
;trigger1 = command = "holdfwd"
;sysvar(1) = 1

;[State 40, 3]
;type = VarSet
;trigger1 = command = "holdback"
;sysvar(1) = -1

;[State 40, 4]
;type = VelSet
;trigger1 = AnimTime = 0
;x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
;y = const(velocity.jump.y)

;[State 40, 5]
;type = VelSet
;trigger1 = AnimTime = 0
;trigger1 = prevstateno = 100 ;RUN_FWD
;trigger1 = sysvar(1) = 1
;x = const(velocity.runjump.fwd.x)


;--------------------------
[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)>0, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 前方ジャンプ]
type = VarSet
trigger1 = command = "holdfwd" && command != "longjump" && prevstateno != 100
trigger1 = sysvar(1) != 2; && var(48) = 0
sysvar(1) = 1

[State 40, 後方ジャンプ]
type = VarSet
trigger1 = command = "holdback" && command != "longjump" && prevstateno != 105
trigger1 = sysvar(1) != -2; && var(48) = 0
sysvar(1) = -1

[State 40, 前方大ジャンプ]
type = VarSet
triggerall = Time = 0 && sysvar(1) != -2
triggerall = command = "holdfwd"
trigger1 = command = "longjump"
trigger2 = prevstateno = 100
trigger3 = var(48) = 1
sysvar(1) = 2

[State 40, 後方大ジャンプ]
type = VarSet
triggerall = Time = 0 && sysvar(1) != 2
triggerall = command = "holdback"
trigger1 = command = "longjump"
trigger2 = var(48) = 1
trigger3 = prevstateno = 105
sysvar(1) = -2

[State 40, ニュートラル大ジャンプ]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = command = "holdup"
trigger1 = sysvar(1) = 2 && var(48) = 0
trigger2 = command = "holdup"
trigger2 = sysvar(1) = -2 && var(48) = 0
trigger3 = command != "holdup"
trigger4 = prevstateno = 52
trigger4 = sysvar(1) = 2 && var(48) = 1
trigger5 = prevstateno = 52
trigger5 = sysvar(1) = -2 && var(48) = 1
value = 47

[State 40, 先行入力大ジャンプ]
type = ChangeState
triggerall = prevstateno != 52 && Time = 0 && var(45) = 1
trigger1 = command = "holdup"
trigger1 = sysvar(1) = 2
trigger2 = command = "holdup"
trigger2 = sysvar(1) = -2
trigger3 = command != "holdup"
value = 47

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(IfElse((Var(50) > 2),6044,44))
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6044,6051),44)

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(IfElse((Var(50) > 2),6044,44))
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6041,6051),41)

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 47, 2] ; Play sound when jumping (long)
type = PlaySnd
triggerall = Time = 0
trigger1 = sysvar(1) != -2
trigger1 = sysvar(1) != 2
value = 40,0

[State 47, 2] ; Play sound when jumping (long)
type = PlaySnd
triggerall = Time = 0
trigger1 = sysvar(1) = -2
trigger2 = sysvar(1) = 2
value = 40,1

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1
;-----------------------
[Statedef 47]
type    = A
physics = A
velset = 0,-11.8
ctrl = 1
facep2 = IfElse((command = "longjump"||command != "holdup"),0,1)

;[State 47, 0]
;type = VarSet
;trigger1 = Time = 1
;sysvar(1) = 0

[State 47, 2] ; Play sound when jumping (long)
type = PlaySnd
triggerall = Time = 0
trigger1 = sysvar(1) != -2
trigger1 = sysvar(1) != 2
value = 40,0

[State 47, 2] ; Play sound when jumping (long)
type = PlaySnd
triggerall = Time = 0
trigger1 = sysvar(1) = -2
trigger2 = sysvar(1) = 2
value = 40,1

[State 47, 2]
type = Afterimage
triggerall = Time = 0
trigger1 = sysvar(1) = -2
trigger2 = sysvar(1) = 2
time = 2
length = 7
PalBright   =   0,  0,  0
PalContrast =  250,250,250
PalAdd      =   0,  0,  0
PalMul      =  1,1,1
FrameGap = 3

[State 47 2]
type = Afterimagetime
trigger1 = time%2 = 0 && Time < 8
time = 2

[State 47, VelSet]
type = VelSet
trigger1 = Time = 0
trigger1 = command = "holdup"
y = const(velocity.jump.y)

[State 47, VelSet]
type = VelSet
triggerall = Time = 0
trigger1 = command != "holdup"
x = 0
y = -9.4

[State 47, VelSet]
type = VelSet
triggerall = Time = 0
trigger1 = sysvar(1) = 1
x = 4

[State 47, VelSet]
type = VelSet
triggerall = Time = 0
trigger1 = sysvar(1) = -1
x = -4

[State 47, VelSet]
type = VelSet
trigger1 = Time = 0
trigger1 = command = "holdup"
trigger1 = sysvar(1) = 2
x = 7

[State 47, VelSet]
type = VelSet
trigger1 = Time = 0
trigger1 = command = "holdup"
trigger1 = sysvar(1) = -2
x = -7

[State 47, VelSet]
type = VelSet
trigger1 = Time = 0
trigger1 = command != "holdup"
trigger1 = sysvar(1) = 2
x = 6.8

[State 47, VelSet]
type = VelSet
trigger1 = Time = 0
trigger1 = command != "holdup"
trigger1 = sysvar(1) = -2
x = -6.8

[State 47, 10]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = command = "holdup"
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6041,6051),41)

[State 47, 12]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = command = "holdup"
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6041,6051),42)

[State 47, 3.1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X < 0
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6041,6051),43)

[State 47, 11]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = command != "holdup"
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6041,6051),61)
;----------------
[Statedef 49]
type    = A
physics = N
anim = 49
ctrl = 0

[State 47, 2] ; Play sound when jumping (long)
type = PlaySnd
trigger1 = animelem = 4
value = 40,1

[State 48, 1]
type = Velset
trigger1 = time = 0
x = 0
y = 0

[State 48, 1]
type = turn
trigger1 = backedgebodydist < 5
persistent = 0

[State 0, Width]
type = Width
trigger1 = AnimElem = 4,<0
edge = 30,0

[State 0, Width]
type = ctrlset
trigger1 = AnimElem = 5,>=0
value = 1

[State 48, 1]
type = Velset
trigger1 = animelem = 4
x = -IfElse((command = "longjump"),6,5)
y = -9.7
[State 48, 1]
type = VelAdd
trigger1 = animelem = 4,>0
y = 0.69

[State 48, 1]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
ctrl = 1
;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A
facep2 = IfElse((command = "holddown"||command != "holdup"),0,1)

[State 47, 2] ; Play sound when jumping (long)
type = PlaySnd
triggerall = Time = 0
trigger1 = sysvar(1) != -2
trigger1 = sysvar(1) != 2
value = 40,0

[State 47, 2] ; Play sound when jumping (long)
type = PlaySnd
triggerall = Time = 0
trigger1 = sysvar(1) = -2
trigger2 = sysvar(1) = 2
value = 40,1

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && Var(50) = 3
value = ifelse((vel x)=0, 6051, ifelse((vel x)>0, 6051, 6051))

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 3
value = ifelse((vel x)=0, 6041, ifelse((vel x)>0, 6042, 6042))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
velset = 0,0
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6047,6057),47)

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 47,0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 5 && Anim != IfElse((Var(50) = 3),6004,6005) && Var(50) > 2
value = IfElse((Var(50) = 3),6004,6005)

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6100,6025),100);100
ctrl = 0
sprpriority = 1

[State 100, 1]
type = VelSet
trigger1 = animelem = 2,>= 0 || var(50) = 3
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 105, 2]
type = ChangeState
trigger1 = Command = "holdup"
trigger1 = var(59)=0
value = 40
ctrl = 0

[State 47, 2]
type = PlaySnd
trigger1 = animelem = 2 && var(50)<3
value = 100,0
channel = 1
loop = 0
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=2 && var(50)>=3
value = S403,3

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = IfElse((Var(50) = 3),0,101)
ctrl = 1

; RUN_Stop
[Statedef 101]
type    = S
physics = N
ctrl = 0
anim = IfElse((Var(50) > 2),6101,101)
sprpriority = 1

[State 47, 2]
type = StopSnd
trigger1 = animelem = 2
channel = 1

[State 105, 1]
type = VelSet
trigger1 = 1
x = 0

[State 105, 2]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = S
physics = S
velset = 0,0
ctrl = 0
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6105,6026),105)
sprpriority = 1

;[State 105, CtrlSet]
;type = CtrlSet
;trigger1 = var(50) != 3
;value = 0

[State 105, 1]
type = VelSet
trigger1 = ((AnimElem = 2 && Var(50) <= 2)||(AnimElem = 3 && var(50) > 2)) && var(50)!=3
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 1]
type = VelSet
trigger1 = var(50) = 3
x = -7

[State 120, 4]
type = StateTypeSet
trigger1 = (AnimElem = 2 && Var(50) <= 2)||(AnimElem = 3 && var(50) > 2) && var(50)!=3
physics = N
type = A

[State 0, VelAdd]
type = VelAdd
trigger1 = (AnimElem = 2,>0&&Var(50) <= 2)||(AnimElem = 3,>0&&var(50) > 2) && var(50)!=3
x = 0.1
y = 0.8

[State 105, 2]
type = ChangeState
trigger1 = var(50) = 3 && Command = "holdup"
trigger1 = var(59)=0
value = 40
ctrl = 0

[State 47, 2]
type = PlaySnd
trigger1 = (AnimElem = 2 && Var(50) <= 2)||(AnimElem = 3 && var(50) > 2) && var(50)!=3
value = 105,0
persistent = 0

[State 105, 2]
type = ChangeState
trigger1 =(Vel Y > 0 && Pos Y >= 0 && var(50)!=3) ||(Command != "holdback" && var(50)=3)
value = IfElse((Var(50) = 3),0,106)
ctrl = IfElse((Var(50) = 3),1,0)

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
velset = 0,0
anim = IfElse((Var(50) > 2),6106,106)

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 47,0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = ENEMYNEAR,MOVETYPE=A
triggerall         = var(50)=0
value = 1200

[State 106, 4]
type = ChangeState
trigger1 = ENEMYNEAR,MOVETYPE=A
triggerall         = var(50)=[1,2]
triggeraal         = power>=500
value = 1860



[State 106, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 110, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 110, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = -7

[State 110, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 110, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[State 115, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 115, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 110

[State 115, 2]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 30

[State 115, 3]
type = VelSet
trigger1 = Time = 0
x = 0
z = 7

[State 115, 4]
type = VelMul
trigger1 = 1
z = 0.8

[State 115, 5]
type = VelSet
trigger1 = AnimTime = -8
z = 0

[State 115, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0 && var(50) != 3
value = IfElse((Var(50) > 2),6120,120) + (statetype = C) + (statetype = A)*2

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0 && var(50) = 3
value = IfElse((statetype != A),6125,6127)

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S


[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != IfElse((Var(50) > 2),IfElse((Var(50) > 3),6130,6135),130)
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6130,6135),130)

[State 130, Hi to Lo]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holddown"
trigger2 = var(59) > 0
trigger2 = enemynear,statetype = C
value = 131


[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != IfElse((Var(50) > 2),IfElse((Var(50) > 3),6131,6130),131)
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6131,6135),131)

[State 131, Lo to Hi]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holddown"
trigger2 = var(59) > 0
trigger2 = enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = enemynear,statetype = A
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != IfElse((Var(50) > 2),IfElse((Var(50) > 3),6132,6137),132)
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6132,6137),132)

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = var(59) = 0
trigger1 = command = "holdback"
trigger2 = var(59) > 0
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
;ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0; && !var(50) = 3
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6140,6145),140) + (statetype = C) + (statetype = A)*2

;[State 140, 1]
;type = ChangeAnim
;trigger1 = Time = 0 && var(50) = 3
;value = IfElse((statetype != A),6145,6147)

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A


[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S
;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6150,6155),150)

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6150,6155),150)

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6151,6155),151)

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S


[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6151,6155),151)

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = S && command = "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = S && enemynear,statetype = C
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 0
trigger1 = statetype = C && command != "holddown"
trigger2 = var(59) > 0
trigger2 = statetype = C && enemynear,statetype = S
trigger2 = enemynear,time >= 16
trigger3 = var(59) > 0
trigger3 = statetype = C && enemynear,statetype = A
statetype = S
physics = S
[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6152,6157),152)

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = IfElse((Var(50) > 2),IfElse((Var(50) > 3),6152,6157),152)

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = IfElse((Var(50) > 1),IfElse((Var(50) > 2),IfElse((Var(50) > 3),6170,6171),171),170)
;IfElse((Var(50) > 2),IfElse((Var(50) > 3),6170,6171),170)
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;-------------------
[Statedef 180]
type = S
velset = 0
ctrl = 0

[State 180, ﾐﾎﾌｬ｢ﾙ]
type = Changeanim;ChangeState
trigger1 = time = 0 && var(50) < 1
value =  IfElse((Random>=250),IfElse((Random>=500),IfElse((Random>=750),183,182),181),180)

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 180 && animelem = 6
value = S180,2
channel = 2

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 182 && animelem = 5
value = S180,1
channel = 2
[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 182 && animelem = 14
value = S180,0
channel = 2

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 181 && animelem = 4
trigger2 = Anim = 183 && animelem = 4
value = S180,3
channel = 2

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 184 && animelem = 2
value = S181,0
channel = 2

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 185 && time = 1
value = S181,1
channel = 2
[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 185 && animelem = 19
value = S181,2
channel = 2
persistent = 0

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 6183 && animelem = 3
value = S182,1
channel = 2
[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 6183 && animelem = 16
value = S182,2
channel = 2
[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 6187 && animelem = 4
value = S182,0
channel = 2

[State 0, Explod]
type = Explod
trigger1 = Anim = 185 && animelem = 5
anim = 186
ID = 186
pos = 19,-123
postype = p1
bindtime = -1
removetime = -1
supermove = 1
pausemove - 1
sprpriority = 5
ontop = 0
ownpal = 1
persistent = 0

[State 180, ﾐﾎﾌｬ｢ﾚ｢ﾛ]
type = Changeanim;ChangeState
trigger1 = time = 0 && var(50) = [1,2]
value = IfElse((Random>=500),185,184)

[State 180, ﾐﾎﾌｬ｢ﾈ]
type = Changeanim;ChangeState
trigger1 = time = 0 && var(50) = 3
value = IfElse((Random>=340),IfElse((Random>=340),6187,6184),6183)

[State 180, ﾐﾎﾌｬ｢ﾝ]
type = Changeanim;ChangeState
trigger1 = time = 0 && var(50) > 3
value = 6180

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 6180 && animelem = 1,=36
value = S183,0
channel = 2
persistent = 0
[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 6180 && animelem = 1
value = S313,IfElse((Random>=340),IfElse((Random>=340),3,2),1)
channel = 2
volume = 10
persistent = 0

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 6184 && animelem = 5,=-1
value = S422,4

[State 180, PlaySnd]
type = PlaySnd
trigger1 = Anim = 6180 && animelem = 1
value = S422,5
loop = 0
persistent = 0
[State 0, Explod]
type = Explod
trigger1 = Anim = 6180 && animelem = 100
anim = 6181
ID = 6181
pos = 5,-5
postype = p1
bindtime = -1
removetime = -1
supermove = 1
pausemove - 1
sprpriority = -5
ontop = 0
ownpal = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal
name = "181"
ID = 181
stateno = 181
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 75
pausemovetime = 75

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1 && var(50)=3
helpertype = normal
name = "182"
ID = 182
stateno = 182
pos = 0,5
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 180, 1]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver
;------------------------------------
[Statedef 181]
type = A
movetype = I
physics = N
anim = 9998
poweradd = 0
velset = 0
SprPriority = -5
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Root,Anim = 6180 && anim != 6181
value = 6181
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Root,Anim = 6184 && anim != 6185 && Root,AnimElem = 3
value = 6185
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Root,Anim = 171 && anim != 1920 && anim != 1921 && Root,AnimElem = 4,>=0
trigger2 = Root,Anim = 184 && anim != 1920 && anim != 1921 && Root,AnimElem = 5,>=0
value = 1920
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1920 && animtime = 0 && anim != 1921
value = 1921
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Root,Anim = 185 && anim != 186 && Root,AnimElem = 5,>=0
value = 186

[State 4, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 171 && Root,AnimElem = 4,>=0 && Root,AnimElem = 5,<0
time = 1
facing = 1
pos = 9,-70
[State 5, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 171 && Root,AnimElem = 5,>=0
time = 1
facing = 1
pos = 10,-81

[State 0, SprPriority]
type = SprPriority
trigger1 = Root,Anim = 171 && Root,AnimElem = 4,>=0 && Root,AnimElem = 5,<0
value = -5
[State 0, SprPriority]
type = SprPriority
trigger1 = Root,Anim = 171 && Root,AnimElem = 5,>=0
trigger2 = Root,Anim = 184 && Root,AnimElem = 5,>=0
trigger3 = Anim = 6185
value = 5

[State 1, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 184 && Root,AnimElem = 5,>=0 && Root,AnimElem = 6,<0
time = 1
facing = 1
pos = 40,-93
[State 2, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 184 && Root,AnimElem = 6,>=0
time = 1
facing = 1
pos = 40,-83

[State 3, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 185 && Root,AnimElem = 5,>=0
time = 1
facing = 1
pos = 19,-123

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1520, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 10

[state 4000,Trans]
type = Trans
trigger1 = 1 && anim != 6181
trans = addalpha
alpha = 135,170

[state 4000,Trans]
type = Trans
trigger1 = 1 && anim = 6181
trans = addalpha
alpha = 235,170

[State 4900, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 200

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0 && anim != 6181
time = 2
length = 5
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0 && anim = 6181
time = 2
length = 4
PalBright = 0, 0, 0
PalContrast =235, 235, 235
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 1520, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo != 180; || AnimTime = 0
;----------------
[Statedef 182]
type = C
movetype = I
physics = N
anim = 6188
poweradd = 0
velset = 0
SprPriority = -5
ctrl = 0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1520, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 4000,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,180

[State 4900, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 5
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 1520, DestroySelf]
type = DestroySelf
trigger1 = Root,StateNo != 180
;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; MAX発動
[Statedef 750]
type = S
ctrl = 0
anim = ifelse(var(50)<3,750,ifelse(var(50)=3,752,753))
velset = 0,0
movetype = I
physics = N
sprpriority = 1
poweradd = -1000

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = animelem = 3
value = 9,3

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 20
value = 900

;---------------------[演出]
[State 3000, 超必殺技発動のエフェクト表示]
Type = Explod
trigger1 = AnimElem = 1
anim = 19010
sprpriority = 4
posType = p1
pos = 0,0
bindTime = 1
supermove = 1
under = 0
scale = 0.5,0.5
ownpal = 1

[State 3000, 超必殺技発動のエフェクト表示]
Type = Explod
trigger1 = AnimElem = 1
anim = 19011
sprpriority = 4
posType = p1
pos = 0,0
bindTime = 1
supermove = 1
under = 0
scale = 0.5,0.5
ownpal = 1

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 4
time = 10
ampl = -5
freq = 95
phase = 95

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem = 6
value = 1


;---------------------[ステート移行]
[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; クイックMAX
[Statedef 751]
type = S
ctrl = 0
anim = 751
velset = 0,0
movetype = I
physics = N
sprpriority = 1
poweradd = -1000

[State 3000, 超必殺技発動のエフェクト表示]
Type = Explod
trigger1 = AnimElem = 1
anim = 19010
sprpriority = 4
posType = p1
pos = 0,0
bindTime = 1
supermove = 1
under = 0
scale = 0.5,0.5
ownpal = 1

[State 3000, 超必殺技発動のエフェクト表示]
Type = Explod
trigger1 = AnimElem = 1
anim = 19011
sprpriority = 4
posType = p1
pos = 0,0
bindTime = 1
supermove = 1
under = 0
scale = 0.5,0.5
ownpal = 1

;---------------------[効果音]
[State 00];
type = PlaySnd
trigger1 = time = 0
value = 9,3

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 20
value = 900

[State 195, 2]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(59)=1
value = 99


;---------------------[演出]


;---------------------[ステート移行]
[State 195, 2]
type = ChangeState
trigger1 = Time = 0
trigger1 = var(59)=0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; INTRO (override this state to give character an intro)
[Statedef 191]
type = S
;anim = IfElse((var(50) >= 1),IfElse((var(50) >= 2),IfElse((var(50) >= 3),IfElse((var(50) >= 4),6190,6191),194),193),191)
ctrl = 0

[State 190, 1]
type = ChangeState
triggerall = palno!= [4,5]
trigger1 = p2name = "Yashiro Nanakase"
trigger2 = p4name = "Yashiro Nanakase"
value = 192

[State 190, 2]
type = ChangeState
triggerall = palno!= [4,5]
trigger1 = p2name = "Shermie"
trigger2 = p4name = "Shermie"
value = 19300

[State 190, 2]
type = ChangeState
triggerall = palno!= [4,5]
trigger1 = Enemy,Name = "Ryougi Shiki"
trigger1 = Enemy,AuthorName = "Neixus/G.MF/Zero_Maou"
trigger2 = Enemy,Name = "Kyo Kusanagi"
trigger2 = Enemy,AuthorName = "Neixus/G.MF"
value = 194

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1
value = IfElse((var(50) >= 1),IfElse((var(50) >= 2),IfElse((var(50) >= 3),IfElse((var(50) >= 4),6190,6191),194),193),191)

[State 191, 1]
type = AssertSpecial
trigger1 = 1 && var(50)<=1
flag = Intro
[State 191, 1]
type = AssertSpecial
trigger1 = time <= 300 && var(50)>=2
flag = Intro

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2 && anim = 6190
value = S191,6
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7 && anim = 6191
value = S192,0
channel = 2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 27 && anim = 6191
value = S192,1
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12 && anim = 6190
value = S193,0
channel = 2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 27 && anim = 6190
value = S192,1
channel = 2

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2,=2 && anim = 6191
trigger2 = AnimElem = 1,=2 && anim = 6190
helpertype = normal
name = "ﾉ晗ﾄｻ・"
ID = 1930
stateno = 1930
pos = 0,0
postype = p1
;facing = -1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 100
pausemovetime = 100

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 6190 && animtime = 0
value = 6000
elem = 6

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 6191 && animtime = 0
value = 6001
elem = 5

[State 191, 3]
type = PlaySnd
triggerall = palno = 1 || palno = 6
trigger1 = Time = 38
value = 190,2

[State 191, 4]
type = PlaySnd
triggerall = palno = 1 || palno = 6
trigger1 = Time = 103
value = 190,1

[State 0, PlaySnd]
type = PlaySnd
triggerall = palno = 2
trigger1 = AnimElem = 1
value = S310,4
channel = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = palno = 2
trigger1 = AnimElem = 7
value = S310,5
channel = 2

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5 && anim = 193
helpertype = normal
name = "ﾗﾖﾖﾐｵﾄｻ・"
ID = 1920
stateno = 1920
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 30
pausemovetime = 30

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5 && anim = 193
helpertype = normal
name = "ﾓﾒﾊﾖﾖﾐｵﾄｻ・"
ID = 1921
stateno = 1921
pos = 0,0
postype = p1
facing = -1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 30
pausemovetime = 30

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2, = 1 && anim = 194
value = S310,0
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6, = 1 && anim = 194
value = S310,1
channel = 2

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8 && anim = 194
helpertype = normal
name = "ﾗﾖﾖﾐｵﾄｻ・"
ID = 1920
stateno = 1920
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 75
pausemovetime = 75

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 10 && anim = 194
helpertype = normal
name = "ﾓﾒﾊﾖﾖﾐｵﾄｻ・"
ID = 1921
stateno = 1921
pos = 0,0
postype = p1
facing = -1
keyctrl = 0
ownpal = 1
supermove = 1
pausemove = 1
supermovetime = 55
pausemovetime = 55

[State 191, 1]
type = ChangeState
trigger1 = animtime = 0 && Time >= 20
value = 0

[state 1]
type = varset
trigger1 = palno = 2
v = 50
value = 1

[state 1]
type = varset
trigger1 = palno = 3
v = 50
value = 2

[state 1]
type = varset
trigger1 = palno = 4
v = 50
value = 3

[state 1]
type = varset
trigger1 = palno = 5
v = 50
value = 4

;------------------------------------------------------------- Pre-fight intro vs. Yashiro
[Statedef 192]
type = S
anim = 192

[State 192, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 192, 2]
type = Assertspecial
trigger1 = AnimElem = 8, < 0
flag = intro

[State 192]
type = Varset
triggerall = palno = 2
trigger1 = time = 0
V = 50
value = 1

[State 192]
type = Varset
triggerall = palno = 3
trigger1 = time = 0
V = 50
value = 2

[State 192]
type = Varset
triggerall = palno = 4
trigger1 = time = 0
V = 50
value = 3

[State 192]
type = Varset
triggerall = palno = 5
trigger1 = time = 0
V = 50
value = 4


[State 192, 3]
type = PlaySnd
trigger1 = AnimElem = 5, = 1
value = 190,4

[State 192, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;--------------------------------------------------------------------------- Pre-fight intro vs. Shermie
[Statedef 19300]
type = S

[State 193, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 193, 2]
type = Assertspecial
trigger1 = AnimElem = 8, < 0
flag = intro

[State 193, 3]
type = PlaySnd
trigger1 = AnimElem = 5, = 1
value = 190,3

[State 193, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0


[State 192]
type = Varset
triggerall = palno = 2
trigger1 = time = 0
V = 50
value = 1

[State 192]
type = Varset
triggerall = palno = 3
trigger1 = time = 0
V = 50
value = 2

[State 192]
type = Varset
triggerall = palno = 4
trigger1 = time = 0
V = 50
value = 3

[State 192]
type = Varset
triggerall = palno = 5
trigger1 = time = 0
V = 50
value = 4

;---------------------------------------
[Statedef 194]
type = S
anim = 192

[State 192, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 192, 2]
type = Assertspecial
trigger1 = AnimElem = 8, < 0
flag = intro

[State 192]
type = Varset
triggerall = palno = 2
trigger1 = time = 0
V = 50
value = 1

[State 192]
type = Varset
triggerall = palno = 3
trigger1 = time = 0
V = 50
value = 2

[State 192]
type = Varset
triggerall = palno = 4
trigger1 = time = 0
V = 50
value = 3

[State 192]
type = Varset
triggerall = palno = 5
trigger1 = time = 0
V = 50
value = 4


[State 192, 3]
type = PlaySnd
trigger1 = AnimElem = 5, = 1
value = 300,8

[State 192, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;------------------
[Statedef 193]
type = s
ctrl = 0
anim = 0
velset = 0,0

[state 0,varset]
type = varset
trigger1 = time = 0
v = 50 
value = 0

[state 190,4]
type = changestate
trigger1 = time = 1
value = 0


;------------------
[Statedef 195]
type = S
movetype = I
physics = S
velset = 0,0
anim = IfElse((var(50) >= 1),IfElse((var(50) >= 2),IfElse((var(50) >= 3),IfElse((var(50) >= 4),6195,6196),197),196),195)
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2 && Anim = 195
value = S195,IfElse(Random < 500,1,0)

channel = 2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8,-1 && Anim = 197
value = S196,0
channel = 2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6,-1 && Anim = 6195
value = S198,0
channel = 2

[State 0, Helper]
type = Helper
trigger1 = (AnimElem = 4||AnimElem = 8||AnimElem = 12) && Anim = 196
helpertype = normal
name = "ｻｨﾓ・・"
ID = 196
stateno = 196
pos = 24,-68
postype = p1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 9 && Anim = 197
helpertype = normal
name = "ｻｨﾓ・・"
ID = 196
stateno = 196
pos = 24,-80
postype = p1
keyctrl = 0
ownpal = 1

[State 191, 1]
type = CtrlSet
trigger1 = Time >= 70
value = 1

[State 0, TargetPowerAdd]
type = TargetPowerAdd
trigger1 = 1
value = -5

[State 191, 1]
type = selfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------
[Statedef 196]
type = A
movetype = I
physics = N
SprPriority = 5
ctrl = 0
anim = 9998;4800

[State 0, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 197 && Root,AnimElem = 27,<0
time = 1
pos = 24,-80
[State 0, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 197 && Root,AnimElem = 27,>=0 && Root,AnimElem = 28,<0
time = 1
pos = 24,-75
[State 0, BindToRoot]
type = BindToRoot
trigger1 = Root,Anim = 197 && Root,AnimElem = 28,>=0
time = 1
pos = 24,-71

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Root,Anim = 196 && anim != 4800
value = 4800
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Root,Anim = 197 && anim != 186
value = 186

[State 212, 1]
type = PlaySnd
trigger1 = time = 0 && Anim = 4800
value = 196,2

[State 212, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 212,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,170

[State 212, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 212,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 5
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 212, DestroySelf]
type = DestroySelf
trigger1 = (AnimTime = 0 && anim != 186) || (Root,Anim = 197 && Root,AnimElem = 9,<-1) || Root,StateNo != 195
;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2 ||time=0 && name!= "Chris"
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)
;
[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2 ||time=0 && name!= "Chris"
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2 ||time=0 && name!= "Chris"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2 && name= "Chris"
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),9000,9010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2 && name= "Chris"
trigger1 = GetHitVar(animtype) = [3,5]
value = 9030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2 && name= "Chris"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(9047 + GetHitVar(animtype)))
value = 9047 + GetHitVar(animtype) ;9051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, 7]
type = ChangeState
trigger1 = Life = 0 && Pos Y = 0 && Var(50) > 2
anim = 9301
value = 5150

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2 && name= "Chris"),9000,5000)
trigger2 = anim = IfElse((Var(50) > 2 && name= "Chris"),9010,5010)
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2 && name= "Chris"),9001,5001)
trigger2 = anim = IfElse((Var(50) > 2 && name= "Chris"),9011,5011)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2 && name= "Chris"),9012,5012)
trigger2 = anim = IfElse((Var(50) > 2 && name= "Chris"),9002,5002)
trigger3 = anim = IfElse((Var(50) > 2 && name= "Chris"),9030,5030)
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0 && Var(50) > 2&& name= "Chris"
value = 9005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0 && Var(50) <= 2||AnimTime = 0 && name!= "Chris"
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

;IfElse((Var(50) > 2),10130,130)

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = selfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0
;IfElse((Var(50) > 2),10130,130)
[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = GetHitVar(animtype) != [3,5]
value = 9020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = GetHitVar(animtype) = [3,5]
value = 9030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(9047 + GetHitVar(animtype)))
value = 9047 + GetHitVar(animtype) ;9051 - 4 + type

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, 7]
type = ChangeState
trigger1 = Life = 0 && Pos Y = 0 && Var(50) > 2&& name= "Chris"
anim = 9301
value = 5150

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2&& name= "Chris"),9020,5020)
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2&& name= "Chris"),9021,5021)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2&& name= "Chris"),9022,5022)
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

;IfElse((Var(50) > 2),10130,130)

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0 && Var(50) <= 2||AnimTime = 0 && name!= "Chris"
value = 5025 + GetHitVar(animtype)

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0 && Var(50) > 2&& name= "Chris"
value = 9025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = selfState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0
;IfElse((Var(50) > 2),10130,130)
;[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
;type = ChangeAnim
;trigger1 = Time = 0 && Var(50) <= 2
;trigger1 = GetHitVar(animtype) != [3,5]
;value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
;trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),9000,9010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = GetHitVar(animtype) = [3,5]
value = 9030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(9047 + GetHitVar(animtype)))
value = 9047 + GetHitVar(animtype) ;9051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = SelfState;ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2&& name= "Chris"),9000,5000)
trigger2 = anim = IfElse((Var(50) > 2&& name= "Chris"),9010,5010)
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2&& name= "Chris"),9001,5001)
trigger2 = anim = IfElse((Var(50) > 2&& name= "Chris"),9011,5011)
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = IfElse((Var(50) > 2&& name= "Chris"),9012,5012)
trigger2 = anim = IfElse((Var(50) > 2&& name= "Chris"),9002,5002)
trigger3 = anim = IfElse((Var(50) > 2&& name= "Chris"),9030,5030)
trigger4 = anim = [5051,5059]
trigger4 = Var(50) <= 2||name!= "Chris"
trigger5 = anim = [9051,9059]
trigger5 = Var(50) > 2&& name= "Chris"
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <=1||time=0 && name!= "Chris"
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035
[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = SelfAnimExist(9035)
trigger1 = Anim != [9051,9059] ;Not if in hit up anim
trigger1 = Anim != 9090 ;Not if hit off ground anim
value = 9035
;IfElse((Var(50) > 2),10130,130)
[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = time = 0;AnimTime = 0
trigger1 = Anim != IfElse((Var(50) > 2&& name= "Chris"),9040,5040)
trigger2 = Time = 0
trigger2 = Anim != IfElse((Var(50) > 2&& name= "Chris"),9035,5035)
value = IfElse((Var(50) > 2&& name= "Chris"),9040,5040)

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0 && Var(50) > 2&& name= "Chris"
trigger1 = Anim = 9035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 9035 && Var(50) > 2&& name= "Chris"
trigger2 = (Anim != [9051, 9059]) && (Anim != [9061, 9069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 9050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [9050,9059]
trigger1 = Vel Y >= ifelse(anim = 9050, 1, -2)
trigger1 = SelfAnimExist(anim+10) && Var(50) > 2&& name= "Chris"
value = anim+10
persistent = 0

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0 && Var(50) <= 2||AnimTime = 0 && name!= "Chris"
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035 && Var(50) <= 2||Anim != 5035 && name!= "Chris"
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10) && Var(50) <= 2
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = IfElse((Var(50) > 2&& name= "Chris"),9070,5070)

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)
[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0 && Var(50) > 2&& name= "Chris"
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 9080, 9090)
;IfElse((Var(50) > 2),9040,5040)
[State 5080, 2]
type = VarAdd
trigger1 = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 2]
type = VarAdd
trigger1 = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = (anim = [9081,9089]) || (anim = [9111,9119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = sysvar(2) = 9090
trigger1 = !SelfAnimExist(9090)
sysvar(2) = 9030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

;IfElse((Var(50) > 2),9040,5040)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = (anim != [9051,9059]) && (anim != [9061,9069])
trigger2 = !SelfAnimExist(9100 + (anim % 10))
value = 9100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = (anim = [9051,9059]) || (anim = [9061,9069])
trigger1 = SelfAnimExist(9100 + (anim % 10))
value = 9100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

;IfElse((Var(50) > 2),9040,5040)

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = anim != [9101,9109]
trigger2 = !SelfAnimExist(9160 + (anim % 10))
value = 9160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = anim = [9101,9109]
trigger1 = SelfAnimExist(9160 + (anim % 10))
value = 9160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

;IfElse((Var(50) > 2),9040,5040)

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10)) && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(9110 + (anim % 10)) && Var(50) > 2&& name= "Chris"
trigger1 = anim = [9081,9089]
value = 9110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) > 2&& name= "Chris"
triggerall = anim != [9110,5119] ;Not already changed anim
trigger1 = anim != [9161,9169]
trigger2 = !SelfAnimExist(9170 + (anim % 10))
value = 9170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0 && Var(50) > 2&& name= "Chris"
triggerall = anim != [9110,9119] ;Not already changed anim
trigger1 = anim = [9161,9169]
trigger1 = SelfAnimExist(9170 + (anim % 10))
value = 9170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10)) && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
triggerall = Var(50) <= 2
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive && Var(50) <= 2||!alive && name!= "Chris"
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [9171,9179]
triggerall = SelfAnimExist(9110 + (anim % 10)) && Var(50) > 2&& name= "Chris"
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 9110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [9111,9119]
triggerall = Var(50) > 2&& name= "Chris"
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 9110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0 && Var(50) > 2&& name= "Chris"
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [9110,9119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = anim != [9111,9119]
trigger2 = !SelfAnimExist(9120 + (anim % 10))
value = 9120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0 && Var(50) > 2&& name= "Chris"
trigger1 = anim = [9111,9119]
trigger1 = SelfAnimExist(9120 + (anim % 10))
value = 9120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = selfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0 && Var(50) > 2 && anim != 9301&& name= "Chris"
triggerall = SelfAnimExist(9140)
trigger1 = (anim != [9111,9119]) && (anim != [9171,9179])
trigger2 = !SelfAnimExist(9140 + (anim % 10))
value = 9140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2 && anim != 9301&& name= "Chris"
trigger1 = (anim = [9111,9119]) || (anim = [9171,9179])
trigger1 = SelfAnimExist(9140 + (anim % 10))
value = 9140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0 && Var(50) <= 2||time=0 && name!= "Chris"
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1 && Var(50) > 2 && anim != 9301&& name= "Chris"
trigger1 = Anim = [9140,9149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0 && Var(50) > 2 && anim != 9301&& name= "Chris"
trigger1 = Anim != [9140,9159]
trigger1 = Anim != [9110,9119]
value = 9110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035 && Var(50) <= 2||Anim = 5035 &&  name!= "Chris"
trigger1 = AnimTime = 0
value = 5050

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 9035 && Var(50) > 2&& name= "Chris"
trigger1 = AnimTime = 0
value = 9050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = IfElse((Var(50) > 2&& name= "Chris"),9200,5200)

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = -.15
y = -3.5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = IfElse((Var(50) > 2&& name= "Chris"),9210,5210)
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
y = -4.5

[State 5210, 1] 
type = VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 1]
type = VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = -2

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = 1.5

[State 5210, 2] ;Go fwd
type = VelMul
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 1

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -1

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd;Gravity
trigger1 = Time >= 4
y = .35

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = IfElse((Var(50) > 2&& name= "Chris"),9300,5300)
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(IfElse((Var(50) > 2&& name= "Chris"),9500,5500))
value = IfElse((Var(50) > 2&& name= "Chris"),9500,5500)

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State a];
type = VarSet
triggerall = palno = 1 || palno = 6
trigger1 = time = 0
v = 50
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, 3] 
type = ChangeState
triggerall = palno = 1 || palno = 6
trigger1 = roundno >= 2
trigger2 = time = 0
value = 193

[State a];MAX発動ゲージ
type = VarSet
trigger1 = time = 0
v = 20
value = 0
;---------------------------------
[Statedef 4500]
type = S
movetype = I
physics = N
anim = 9998
poweradd = 0
velset = 0,0
ctrl = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 10

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = Root,Var(50)=4 || Root,Anim = 6325
value = 0

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 20
pos = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Root,Var(50) >=3
value = 9999

[State 0, VarSet]
type = VarSet
;triggerall = Var(38) < 25
trigger1 = 1;Root,ProjHit1521 = 1, < 3
;trigger2 = Root,Anim >= 1600&&Root,Anim < 1800 && Root,MoveHit = 1;,< 15
;trigger3 = (Root,Anim = [1800,1850]) && Root,AnimElem = 15,>0 && Root,AnimElem = 34,<0
;trigger4 = Root,Var(38) = 20
var(38) = Root,Var(38);20
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = enemy,movetype != H || Root,Var(50) >=3
var(38) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = Var(38)
var(38) = -1

[State 0, Helper]
type = Helper
trigger1 = NumHelper(4000) < 6 && Random < 100 && var(38)
helpertype = normal
name = "ｻﾗ"
ID = 4000
stateno = 4000
pos = 0,-50
random = 100,100
sprpriority = 5
postype = p2
keyctrl = 0
ownpal = 1
bindtime = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumHelper(4000) < 6 && Random < 150 && var(38)
helpertype = normal
name = "ｻﾗ"
ID = 4000
stateno = 4001
pos = 0,-50
random = 100,100
sprpriority = 5
postype = p2
keyctrl = 0
ownpal = 1
bindtime = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumHelper(4000) < 6 && Random < 550 && var(38)
helpertype = normal
name = "ｻﾗ"
ID = 4000
stateno = 4002
pos = 0,-50
random = 100,100
sprpriority = 5
postype = p2
keyctrl = 0
ownpal = 1
bindtime = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumHelper(4000) < 6 && Random < 350 && var(38)
helpertype = normal
name = "ｻﾗ"
ID = 4000
stateno = 4003
pos = 0,-50
random = 100,100
sprpriority = 5
postype = p2
keyctrl = 0
ownpal = 1
bindtime = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumHelper(4000) < 6 && Random < 850 && var(38)
helpertype = normal
name = "ｻﾗ"
ID = 4000
stateno = 4004
pos = 0,-50
random = 100,100
sprpriority = 5
postype = p2
keyctrl = 0
ownpal = 1
bindtime = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = NumHelper(4000) < 6 && Random < 800 && var(38)
helpertype = normal
name = "ｻﾗ"
ID = 4000
stateno = 4005
pos = 0,-50
random = 100,100
sprpriority = 5
postype = p2
keyctrl = 0
ownpal = 1
bindtime = 1
ignorehitpause = 1

;---------------------------
[Statedef 4000]
type = A
movetype = I
physics = N
anim = 4000
velset = 0,0
SprPriority = 5
ctrl = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 37
range = -50,50

[State 0, PosAdd]
type = PosAdd
trigger1 = Random < 400 && time = 0
x = var(37);Random/10
persistent = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = Random < 400 && time = 0
y = var(37);Random/10
persistent = 0

[State 4000, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 4000,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,270

[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 6
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 4000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
[Statedef 4001]
type = A
movetype = I
physics = N
anim = 4001
velset = 0,0
SprPriority = 5
ctrl = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 37
range = -50,50

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = var(37)
persistent = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = var(37)
persistent = 0

[State 4000, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 4000,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,270

[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 6
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 4000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
[Statedef 4002]
type = A
movetype = I
physics = N
anim = 4002
velset = 0,0
SprPriority = 5
ctrl = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 37
range = -50,50

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = var(37)
persistent = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = var(37)
persistent = 0

[State 4000, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 4000,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,170

[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 6
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 4000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
[Statedef 4003]
type = A
movetype = I
physics = N
anim = 4003
velset = 0,0
SprPriority = 5
ctrl = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 37
range = -50,50

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = var(37)
persistent = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = var(37)
persistent = 0

[State 4000, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 4000,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,170

[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 6
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 4000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

[Statedef 4004]
type = A
movetype = I
physics = N
anim = 4004
velset = 0,0
SprPriority = 5
ctrl = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 37
range = -50,50

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = var(37)
persistent = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = var(37)
persistent = 0

[State 4000, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 4000,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,170

[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 6
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 4000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
[Statedef 4005]
type = A
movetype = I
physics = N
anim = 4005
velset = 0,0
SprPriority = 5
ctrl = 0

[State 0, VarRandom]
type = VarRandom
trigger1 = time = 0
v = 37
range = -50,50

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = var(37)
persistent = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
y = var(37)
persistent = 0

[State 4000, HitBy]
type = HitBy
trigger1 = 1
value = SCA
time = 1

[state 4000,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 135,170

[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 2

[State 4000,Afterimage]
type = Afterimage
trigger1 = Time = 0
time = 2
length = 6
PalBright = 0, 0, 0
PalContrast =135, 135, 135
PalAdd = 0, 0, 0
PalMul = 0.9,0.9,0.9
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1

[State 4000, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
;--------------------------------
[Statedef -2]


[State 1950, 1]
type = NotHitBy
trigger1 = roundstate != 2
value = SCA





;-------------------------------
[state a];MAX発動補正
type = varset
trigger1 = var(20) = 0
fvar(5) = 1.0

[state a];MAX発動補正
type = varset
trigger1 = var(20) > 0
fvar(5) = 0.9

[state a];BCﾉﾋｺｦﾐﾞﾕ
type = attackmulset
trigger1 = var(20) > 0
value = 0.65

[State -2, PowerAdd];ﾊﾜｻﾘﾆ
type = PowerAdd
trigger1 = Time = 0 && StateNo = [150,154]
trigger2 = MoveType = H && Time = 0
value = 30 + Random%2 - var(59) * (NumPartner = 0)
ignorehitpause = 1
persistent = 0

;---------------------[変数]
[state -2 ,1];MAX発動時のパワーセット
type = varset
trigger1 = var(20) = 900
v = 21
value = power

[state a]
type = varadd
trigger1 = var(20) > 0
v = 20
value = -1

[state a]
type = varset
trigger1 = var(20) < 0
v = 20
value = 0

[state a]
type = powerset
trigger1 = var(20) > 0
trigger1 = stateno != [2000,2999]
value = var(21)
ignorehitpause = 1

;---------------------[演出]
[State a];点滅
type = palfx
trigger1 = var(20) > 0
trigger1 = gametime % 2 = 0
time = 1
add = 60,20,120
;color = 1
ignorehitpause = 1

[State 1000, Afterimage]
type = Afterimage
trigger1 = var(20) > 0
trigger1 = gametime%12 = 0
trans = add
paladd = 60,20,120
time = 12
length = 12
TimeGap = 1
FrameGap = 1

;---------------------[ヘルパー]
[state a];MAX発動ゲージ
type = Helper
trigger1 = numhelper(7550) = 0
id = 7550
name = "MAX"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 7550
helpertype = normal
pausemovetime = 99999999
supermovetime = 99999999
keyctrl = 0 
ownpal = 1


[State -2, 1]
type = PalFX
triggerall = gametime%2 = 0 && time <= 20
triggerall = PrevStateNo=1100||PrevStateNo=1150||PrevStateNo=1300||PrevStateNo=1305||PrevStateNo=1320||PrevStateNo=1340||PrevStateNo=1360
trigger1 = StateNo = 2000||StateNo = 2050||StateNo = 2100||StateNo = 2150;||StateNo = 8000
;trigger2 = StateNo = 2200||StateNo = 2250||StateNo = 2300||StateNo = 2350||StateNo = 8100
time = 1
add = 255,255,255
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = gametime%2 = 0 && time <= 20
triggerall = PrevStateNo=1700||PrevStateNo=1750||PrevStateNo=1800||PrevStateNo=1850
trigger1 = StateNo = 2200||StateNo = 2250||StateNo = 2300||StateNo = 2350
time = 1
add = 255,255,255
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = gametime%2 = 0 && time <= 20
triggerall = PrevStateNo=7000||PrevStateNo=7100||PrevStateNo=7300
trigger1 = StateNo = 8000||StateNo = 8100
time = 1
add = 255,255,255
ignorehitpause = 1

[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 0 && Var(50) = 1 && anim != 1
value = 1
[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 0 && Var(50) = 2 && anim != 2
value = 2
[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 0 && Var(50) = 3 && anim != 6001
value = 6001
[State 0, 1]
type = ChangeAnim
trigger1 = Anim = 0 && Var(50) = 4 && anim != 6000
value = 6000

[State 0, VarSet]
type = VarSet
triggerall = Var(38) < 25
trigger1 = ProjHit1521 = 1, < 3
trigger2 = Anim >= 1600&&Anim < 1800 && MoveHit = 1
trigger3 = (Anim = [1800,1850]) && AnimElem = 15,>0 && AnimElem = 34,<0 && MoveHit = 1
var(38) = 25
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = helper(198964),var(20)=1
trigger1 = Var(50)=4
trigger2 = Var(50)=3
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = enemy,movetype != H
var(38) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = Var(38)
var(38) = -1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 8 && NumHelper(4500) = 0
helpertype = normal
name = "ｻﾗ"
ID = 4500
stateno = 4500
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = helper(198964),var(20)=1
trigger1 = Var(35) <= -200
value = SCA
time = 1

;?体化---------
[state 4000,Trans]
type = Trans
triggerall = helper(198964),var(20)=1
trigger1 = Var(50) = 4 && StateNo != 1954 && stateno != [180,191]
trigger1 = roundstate != 0 && StateNo != 8200;time%2 = 0
trigger1 = (var(35)>=0 && time%2 = 0) || var(35)<0
trigger2 = Var(50) = 3 && StateNo != 1953 && stateno != [180,191]
trigger2 = roundstate != 0 && StateNo != 8200;time%2 = 0
trigger2 = (var(35)>=0 && time%2 = 0) || var(35)<0
trans = addalpha
alpha = 335,370

[state 4000,Trans]
type = NULL;Trans
trigger1 = Var(50) = 3 && StateNo != 1953 && stateno != [180,191]
trigger1 = roundstate != 0
trans = addalpha
alpha = 235,70

[State 3000, 1]
type = null;PalFX
trigger1 = 1 && var(50) = 3
trigger1 = stateno != [180,191]
trigger1 = stateno != 1953
trigger1 = roundstate != 0
trigger1 = var(35) > 40
time = 2
add = var(35),var(35),var(35)
ignorehitpause = 1
[State 3000, 1]
type = null;PalFX
trigger1 = 1 && var(50) = 3
trigger1 = stateno != [180,191]
trigger1 = stateno != 1953
trigger1 = var(35) <= 40
trigger1 = roundstate != 0
time = 2
add = var(35)-40,var(35)-40,var(35)-40
ignorehitpause = 1
color = 0

[State 0, PalFX]
type = PalFX
triggerall = helper(198964),var(20)=1
trigger1 = 1 && var(50) = 4
trigger2 = 1 && var(50) = 3
;trigger1 = roundstate != 0
time = var(36)
add = var(35),var(35),var(35)
ignorehitpause = 1
persistent = 0

;--------------------------------

[State 0, VarSet]
type = VarSet
trigger1 = 1 && var(50) > 2
var(36) = 10
[State 0, VarSet]
type = VarSet
trigger1 = var(35) >= 70 && var(50) >= 3 && StateNo != 1954  && StateNo != 1953 && stateno != [180,191]
;trigger2 = var(35) < 120 && var(50)  = 3 && StateNo != 1953 && stateno != [180,191]
var(34) = -1
[State 0, VarSet]
type = VarSet
trigger1 = var(35) < -300 && var(50) > 2 && life != 0 && StateNo != 1954 && StateNo != 1953  && stateno != [180,191]
var(34) = 0
[State 0, VarSet]
type = VarSet
trigger1 = var(33) >= 70 && var(50) > 2 && StateNo != 1954 && StateNo != 1953   && stateno != [180,191]
var(32) = -1
[State 0, VarSet]
type = VarSet
trigger1 = var(33) < -300 && var(50) > 2 && StateNo != 1954 && StateNo != 1953 && stateno != [180,191]
var(32) = 0

[State 0, VarSet]
type = VarAdd
trigger1 = var(34) = 0 && var(50) = 4 && StateNo != 1954 && stateno != [180,191]
trigger2 = var(34) = 0 && var(50) = 3 && StateNo != 1953 && stateno != [180,191]
var(35) = 5
[State 0, VarSet]
type = VarAdd
trigger1 = var(34) = -1 && var(50) = 4 && var(35) >-310 && StateNo != 1954 && stateno != [180,191]
trigger2 = var(34) = -1 && var(50) = 3 && var(35) >-310 && StateNo != 1953 && stateno != [180,191]
var(35) = -5
[State 0, VarSet]
type = VarAdd
trigger1 = var(32) = 0 && var(50) = 4 && StateNo != 1954 && stateno != [180,191]
trigger2 = var(32) = 0 && var(50) = 3 && StateNo != 1953 && stateno != [180,191]
var(33) = 5
[State 0, VarSet]
type = VarAdd
trigger1 = var(32) = -1 && var(50) = 4 && StateNo != 1954 && stateno != [180,191]
trigger2 = var(32) = -1 && var(50) = 3 && StateNo != 1953 && stateno != [180,191]
var(33) = -5

[State 0, VarSet]
type = VarSet
trigger1 = var(50) >= 3 && (StateNo = 180 || StateNo = 8200)
var(35) = 0

[State -2,LifeAdd_KiLL]
type = null;LifeAdd
trigger1 = 1 && MoveType = H && ((StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5100)&&animelem = 1)
value = 0
kill = 1
[State -2,LifeAdd_KiLL!]
type = null;LifeAdd
trigger1 = 1 && (MoveType != H || (StateNo!= 5000&&StateNo!= 5010&&StateNo!= 5020&&StateNo!= 5100))
value = 0
kill = 0

;[State 0, VarSet]
;type = VarSet
;trigger1 = PalNo = 2 && var(50)=0
;var(50) = 4

;[State 0, HitOverride]
;type = HitOverride
;trigger1 = Var(50) >= 3 && (stateno < 120 || stateno >= 160)
;attr = SCA,AA,AT,AP
;slot = 0
;stateno = 5000 + (statetype = C)*10 + (statetype = A)*20
;time = 1
;forceair = 0

;[state 4000,Trans]
;type = Trans
;trigger1 = Var(50) = 4 && StateNo != 1954 && stateno != [180,191]
;trigger1 = roundstate != 0 && StateNo != 8200;time%2 = 0
;trigger1 = (var(35)>=0 && time%2 = 0) || var(35)<0
;trans = addalpha
;alpha = 335,370
;
;[state 4000,Trans]
;type = Trans
;trigger1 = Var(50) = 3 && StateNo != 1953 && stateno != [180,191]
;trigger1 = stateno != 81100
;trigger1 = roundstate != 0
;trans = addalpha
;alpha = 235,70

[State 3000, 1]
type = NULL;PalFX
trigger1 = 1 && var(50) = 3
trigger1 = stateno != [180,191]
trigger1 = stateno != 1953
trigger1 = stateno != 81100
trigger1 = roundstate != 0
trigger1 = var(35) > 40
time = 2
add = var(35),var(35),var(35)
ignorehitpause = 1
[State 3000, 1]
type = NULL;PalFX
trigger1 = 1 && var(50) = 3
trigger1 = stateno != [180,191]
trigger1 = stateno != 1953
trigger1 = stateno != 81100
trigger1 = var(35) <= 40
trigger1 = roundstate != 0
time = 2
add = var(35)-40,var(35)-40,var(35)-40
ignorehitpause = 1
color = 0

[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = Var(50) = 3
trigger1 = stateno != 81100
time = 10

[State 4000,Afterimage]
type = Afterimage
trigger1 = Var(50) = 3
trigger1 = stateno != 81100
time = 2
length = 2
PalAdd = var(35)+140,var(35)+140,var(35)+140
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1
persistent = 0
[State 4000,Afterimage]
type = Afterimage
trigger1 = Var(50) = 3 && var(35) <= 40
trigger1 = stateno != 81100
time = 2
length = 2
PalAdd = var(35)+180,var(35)+180,var(35)+180
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1
persistent = 0



[State 4000, AfterImageTime]
type = AfterImageTime
trigger1 = Var(50) = 4 && gametime%2 = 0
time = 1

[State 4000,Afterimage]
type = Afterimage
trigger1 = Var(50) = 4 && gametime%5 = 0
time = 2;var(36)
length = 2
PalContrast =var(33)+90,var(33)+90,var(33)+90
PalAdd = var(33)+180,var(33)+180,var(33)+180
FrameGap = 1
sprpriority = 5
Trans = Add1
ownpal = 1
ontop = 1
persistent = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Var(50) >= 3 && statetype != S && statetype != C && statetype != A
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, StopSnd]
type = StopSnd
trigger1 = (movetype = H&&Stateno<5000&&Stateno>6000);||Stateno = 100 || Stateno = 105
channel = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = Time = 1 && alive && Random <= 800 && UniqHitCount <= 1 && GetHitVar(hitcount) <= 2
trigger1 = (Stateno=5000||Stateno=5010||Stateno=5020||Stateno=5030||Stateno=5100)&&var(50)<2
value = S350,IfElse((Random <= 650),IfElse((Random <= 325),2,1),0)
channel = 2
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = Time = 1 && alive && Random <= 800 && UniqHitCount <= 1 && GetHitVar(hitcount) <= 2
trigger1 = (Stateno=5000||Stateno=5010||Stateno=5020||Stateno=5030||Stateno=5100)&&var(50)=2
value = S351,IfElse((Random <= 650),IfElse((Random <= 325),IfElse((Random <= 325),3,2),1),0)
channel = 2
ignorehitpause = 1
persistent = 0

[State 200-699, PlaySnd]
type = PlaySnd
triggerall = var(50)<2 && Random < 700
trigger1 = Animelem = 1 && (anim=200||anim=240||anim=410||anim=640||anim=650)
trigger2 = Animelem = 3 && anim = 210
trigger3 = Animelem = 2 && (anim = 250||anim = 400||anim = 600||anim = 610)
value = S200,0
channel = 2

[State 200-699, PlaySnd]
type = PlaySnd
triggerall = var(50)<2 && ((Random < 700&&StateType!=A)||(Random < 350&&StateType=A))
trigger1 = Animelem = 6,=-1 && anim=220
trigger2 = Animelem = 2 && (anim=230||anim=260||anim=270||anim=271||anim=420||anim=670)
trigger3 = Animelem = 3 && (anim=430||anim=630)
trigger4 = Animelem = 1 && (anim=620||anim=660)
value = S200,1
channel = 2

[State 200-699, PlaySnd]
type = PlaySnd
triggerall = var(50)=2 && Random < 700
trigger1 = Animelem = 1 && (anim=200||anim=240||anim=410||anim=640||anim=650)
trigger2 = Animelem = 3 && anim = 210
trigger3 = Animelem = 2 && (anim = 250||anim = 400||anim = 600||anim = 610)
value = S200,3
channel = 2

[State 200-699, PlaySnd]
type = PlaySnd
triggerall = var(50)=2 && ((Random < 700&&StateType!=A)||(Random < 350&&StateType=A))
trigger1 = Animelem = 6,=-1 && anim=220
trigger2 = Animelem = 2 && (anim=230||anim=260||anim=270||anim=271||anim=420||anim=670)
trigger3 = Animelem = 3 && (anim=430||anim=630)
trigger4 = Animelem = 1 && (anim=620||anim=660)
value = S200,IfElse((Random < 500),2,4)
channel = 2

[State 200-699, PlaySnd]
type = PlaySnd
triggerall = animelem = 1,=1
trigger1 = Stateno=200||Stateno=210||Stateno=220||Stateno=230
trigger2 = Stateno=240||Stateno=250||Stateno=260||Stateno=270
trigger3 = Stateno=400||Stateno=410||Stateno=420||Stateno=430
trigger4 = Stateno=600||Stateno=610||Stateno=620||Stateno=630
trigger5 = Stateno=640||Stateno=650||Stateno=660||Stateno=670
trigger6 = Stateno=6600||Stateno=6610||Stateno=6620||Stateno=6630
value = S400,IfElse((Random <= 500),1,0)

;[State 200-699, PlaySnd]
;type = PlaySnd
;triggerall = var(50)=4 && Random < 700
;trigger1 = Animelem = 1 && (anim=6200||anim=6210||anim=6240||anim=6250||anim=6400||anim=6410||anim=6600||anim=6610)
;value = S203,IfElse((Random <= 650),IfElse((Random <= 325),2,1),0)
;channel = 2
;[State 200-699, PlaySnd]
;type = PlaySnd
;triggerall = var(50)=4 && ((Random < 700&&StateType!=A)||(Random < 350&&StateType=A))
;trigger1 = (Animelem = 5 && (anim=6220||anim=6610))||(Animelem = 4,=-2 && anim=6260)
;trigger2 = (Animelem = 3 && anim=6270)||(Animelem = 4 && (anim=6420||anim=6430))
;trigger3 = (Animelem = 1 && (anim=6620||anim=6630))
;value = S203,IfElse((Random <= 650),IfElse((Random <= 325),5,4),3)
;channel = 2

[State -2, Stop RunSnd]
type = StopSnd
trigger1 = stateno != 100 && stateno != 101
channel = 1

[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "V10=%d,var(50)=%d,sysV1=%d,BackEdgeBodyDist=%d,FrontEdgeBodyDist=%d"
params = var(10),var(50),sysvar(1),BackEdgeBodyDist,FrontEdgeBodyDist
ignorehitpause = 1

[State -2, AppendToClipboard]
type = AppendToClipboard
trigger1 = 1
text = "\nDist X=%d,Y=%d, Vel X=%d/10,Y=%d/10 : Power=%d"
params = floor(P2BodyDist X),ceil(P2BodyDist Y),ceil(Vel X*10),floor(Vel Y*10),Power
ignorehitpause = 1

;--------------------
[State -2, 1]
type = VarAdd
trigger1 = var(46) > 0
v = 46
value = -1
ignorehitpause = 1
[State -2, 1]
type = VarAdd
trigger1 = var(47) > 0
v = 47
value = -1
ignorehitpause = 1

[State -2, 0]
type = varset
triggerall = time = [0,2]
trigger1 = stateno = 200 || stateno = 210 || stateno = 220 || stateno = 230
trigger2 = stateno = 240 || stateno = 250 || stateno = 260 || stateno = 270
trigger3 = stateno = 400 || stateno = 410 || stateno = 420 || stateno = 430
trigger4 = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 630
trigger5 = stateno = 640 || stateno = 650 || stateno = 660 || stateno = 670
trigger6 = stateno = 6600 || stateno = 6610 || stateno = 6620 || stateno = 6630
trigger7 = (stateno = [300,305])||stateno=900||stateno=950||stateno=1000||stateno=1050
trigger8 = stateno = 1100 || stateno = 1150 || stateno = 1200 || stateno = 1250
trigger9 = stateno = 1300 || stateno = 1350 || stateno = 1400 || stateno = 1450
trigger10 = stateno = 1500 || stateno = 1550 || stateno = 1600 || stateno = 1650
trigger11 = stateno = 1700 || stateno = 1750 || stateno = 1800 || stateno = 1850
trigger12 = (stateno = [1900,1999])||stateno=2000||stateno=2050||stateno=2100||stateno=2150
trigger13 = stateno = 2200 || stateno = 2250 || stateno = 2300 || stateno = 2350
trigger14 = stateno = 7000 || stateno = 7100 || stateno = 7200 || stateno = 7300
trigger15 = stateno = 8000 || stateno = 8100
trigger16 = stateno = 100 || stateno = 105
trigger17 = stateno = 40 || stateno = 47 || stateno = 50
var(40) = 0
[State -2, 0]
type = varset
triggerall = time = [0,2]
trigger1 = stateno = 200 || stateno = 210 || stateno = 220 || stateno = 230
trigger2 = stateno = 240 || stateno = 250 || stateno = 260 || stateno = 270
trigger3 = stateno = 400 || stateno = 410 || stateno = 420 || stateno = 430
trigger4 = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 630
trigger5 = stateno = 640 || stateno = 650 || stateno = 660 || stateno = 670
trigger6 = stateno = 6600 || stateno = 6610 || stateno = 6620 || stateno = 6630
trigger7 = (stateno = [300,305])||stateno=900||stateno=950||stateno=1000||stateno=1050
trigger8 = stateno = 1100 || stateno = 1150 || stateno = 1200 || stateno = 1250
trigger9 = stateno = 1300 || stateno = 1350 || stateno = 1400 || stateno = 1450
trigger10 = stateno = 1500 || stateno = 1550 || stateno = 1600 || stateno = 1650
trigger11 = stateno = 1700 || stateno = 1750 || stateno = 1800 || stateno = 1850
trigger12 = (stateno = [1900,1999])||stateno=2000||stateno=2050||stateno=2100||stateno=2150
trigger13 = stateno = 2200 || stateno = 2250 || stateno = 2300 || stateno = 2350
trigger14 = stateno = 7000 || stateno = 7100 || stateno = 7200 || stateno = 7300
trigger15 = stateno = 8000 || stateno = 8100
trigger16 = stateno = 100 || stateno = 105
trigger17 = stateno = 40 || stateno = 47 || stateno = 50
var(43) = 0
[State -2, 0]
type = varset
triggerall = time = [0,2]
trigger1 = stateno = 200 || stateno = 210 || stateno = 220 || stateno = 230
trigger2 = stateno = 240 || stateno = 250 || stateno = 260 || stateno = 270
trigger3 = stateno = 400 || stateno = 410 || stateno = 420 || stateno = 430
trigger4 = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 630
trigger5 = stateno = 640 || stateno = 650 || stateno = 660 || stateno = 670
trigger6 = stateno = 6600 || stateno = 6610 || stateno = 6620 || stateno = 6630
trigger7 = (stateno = [300,305])||stateno=900||stateno=950||stateno=1000||stateno=1050
trigger8 = stateno = 1100 || stateno = 1150 || stateno = 1200 || stateno = 1250
trigger9 = stateno = 1300 || stateno = 1350 || stateno = 1400 || stateno = 1450
trigger10 = stateno = 1500 || stateno = 1550 || stateno = 1600 || stateno = 1650
trigger11 = stateno = 1700 || stateno = 1750 || stateno = 1800 || stateno = 1850
trigger12 = (stateno = [1900,1999])||stateno=2000||stateno=2050||stateno=2100||stateno=2150
trigger13 = stateno = 2200 || stateno = 2250 || stateno = 2300 || stateno = 2350
trigger14 = stateno = 7000 || stateno = 7100 || stateno = 7200 || stateno = 7300
trigger15 = stateno = 8000 || stateno = 8100
trigger16 = stateno = 100 || stateno = 105
trigger17 = stateno = 40 || stateno = 47 || stateno = 50
var(44) = 0
[State -2, 0]
type = varset
triggerall = time = [0,2]
trigger1 = stateno = 200 || stateno = 210 || stateno = 220 || stateno = 230
trigger2 = stateno = 240 || stateno = 250 || stateno = 260 || stateno = 270
trigger3 = stateno = 400 || stateno = 410 || stateno = 420 || stateno = 430
trigger4 = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 630
trigger5 = stateno = 640 || stateno = 650 || stateno = 660 || stateno = 670
trigger6 = stateno = 6600 || stateno = 6610 || stateno = 6620 || stateno = 6630
trigger7 = (stateno = [300,305])||stateno=900||stateno=950||stateno=1000||stateno=1050
trigger8 = stateno = 1100 || stateno = 1150 || stateno = 1200 || stateno = 1250
trigger9 = stateno = 1300 || stateno = 1350 || stateno = 1400 || stateno = 1450
trigger10 = stateno = 1500 || stateno = 1550 || stateno = 1600 || stateno = 1650
trigger11 = stateno = 1700 || stateno = 1750 || stateno = 1800 || stateno = 1850
trigger12 = (stateno = [1900,1999])||stateno=2000||stateno=2050||stateno=2100||stateno=2150
trigger13 = stateno = 2200 || stateno = 2250 || stateno = 2300 || stateno = 2350
trigger14 = stateno = 7000 || stateno = 7100 || stateno = 7200 || stateno = 7300
trigger15 = stateno = 8000 || stateno = 8100
trigger16 = stateno = 100 || stateno = 105
trigger17 = stateno = 40 || stateno = 47 || stateno = 50
var(45) = 0
[State -2, 0]
type = varset
triggerall = time = [0,2]
trigger1 = stateno = 200 || stateno = 210 || stateno = 220 || stateno = 230
trigger2 = stateno = 240 || stateno = 250 || stateno = 260 || stateno = 270
trigger3 = stateno = 400 || stateno = 410 || stateno = 420 || stateno = 430
trigger4 = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 630
trigger5 = stateno = 640 || stateno = 650 || stateno = 660 || stateno = 670
trigger6 = stateno = 6600 || stateno = 6610 || stateno = 6620 || stateno = 6630
trigger7 = (stateno = [300,305])||stateno=900||stateno=950||stateno=1000||stateno=1050
trigger8 = stateno = 1100 || stateno = 1150 || stateno = 1200 || stateno = 1250
trigger9 = stateno = 1300 || stateno = 1350 || stateno = 1400 || stateno = 1450
trigger10 = stateno = 1500 || stateno = 1550 || stateno = 1600 || stateno = 1650
trigger11 = stateno = 1700 || stateno = 1750 || stateno = 1800 || stateno = 1850
trigger12 = (stateno = [1900,1999])||stateno=2000||stateno=2050||stateno=2100||stateno=2150
trigger13 = stateno = 2200 || stateno = 2250 || stateno = 2300 || stateno = 2350
trigger14 = stateno = 7000 || stateno = 7100 || stateno = 7200 || stateno = 7300
trigger15 = stateno = 8000 || stateno = 8100
trigger16 = stateno = 100 || stateno = 105
trigger17 = stateno = 40 || stateno = 47 || stateno = 50
var(48) = 0
[State -2, 0]
type = varset
triggerall = time = [0,2]
trigger1 = stateno = 200 || stateno = 210 || stateno = 220 || stateno = 230
trigger2 = stateno = 240 || stateno = 250 || stateno = 260 || stateno = 270
trigger3 = stateno = 400 || stateno = 410 || stateno = 420 || stateno = 430
trigger4 = stateno = 600 || stateno = 610 || stateno = 620 || stateno = 630
trigger5 = stateno = 640 || stateno = 650 || stateno = 660 || stateno = 670
trigger6 = stateno = 6600 || stateno = 6610 || stateno = 6620 || stateno = 6630
trigger7 = (stateno = [300,305])||stateno=900||stateno=950||stateno=1000||stateno=1050
trigger8 = stateno = 1100 || stateno = 1150 || stateno = 1200 || stateno = 1250
trigger9 = stateno = 1300 || stateno = 1350 || stateno = 1400 || stateno = 1450
trigger10 = stateno = 1500 || stateno = 1550 || stateno = 1600 || stateno = 1650
trigger11 = stateno = 1700 || stateno = 1750 || stateno = 1800 || stateno = 1850
trigger12 = (stateno = [1900,1999])||stateno=2000||stateno=2050||stateno=2100||stateno=2150
trigger13 = stateno = 2200 || stateno = 2250 || stateno = 2300 || stateno = 2350
trigger14 = stateno = 7000 || stateno = 7100 || stateno = 7200 || stateno = 7300
trigger15 = stateno = 8000 || stateno = 8100
trigger16 = stateno = 100 || stateno = 105
;trigger17 = stateno = 47 || stateno = 50
sysvar(1) = 0
[State -2, 0]
type = varset
trigger1 = var(46) = 0
var(43) = 0
ignorehitpause = 1
[State -2, 0]
type = varset
trigger1 = var(46) = 0
var(44) = 0
ignorehitpause = 1
[State -2, 0]
type = varset
trigger1 = var(46) = 0
var(45) = 0
ignorehitpause = 1
[State -2, 0]
type = varset
trigger1 = var(46) = 0
var(48) = 0
ignorehitpause = 1
[State -2, 0]
type = varset
trigger1 = movetype = H
sysvar(1) = 0
ignorehitpause = 1

[State -2, global damage adjustment multiplier & true damage setting]
type = VarSet
trigger1 = 1
fvar(3) = 1.0       ;this setting doesn't ignore emeny's defence


[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = time%2=0
flag = noshadow

;Orochi power shinning Palfx
;===========================================================================================================================
[State -2]
type = VarSet
triggerall = stateno != [120,159]
trigger1 = RoundNo = 1
trigger1 = RoundState = 0 && stateno != 55087719
trigger2 = !HitShakeOver
var(52) = 0
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = RoundNo = 1
trigger1 = RoundState >= 2
trigger1 = HitShakeOver
trigger2 = RoundNo >= 2
trigger2 = HitShakeOver
trigger2 = RoundState >= 0
trigger3 = roundno = 1
trigger3 = RoundState = 0 && stateno = 55087719
trigger4 = stateno = [120,159]
var(52) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = StateNo != 2101 && stateno != 2000 && stateno != 2010 && stateno != 2100 && stateno != 2150
trigger1 = RoundNo = 1
trigger1 = RoundState >= 2
trigger1 = HitShakeOver
trigger2 = RoundNo >= 2
trigger2 = HitShakeOver
trigger2 = RoundState >= 0
trigger3 = roundno = 1
trigger3 = RoundState = 0 && stateno = 55087719
trigger4 = stateno = [120,159]
var(53) = 1
ignorehitpause = 1

[State -3, PalFX]
type = PalFX
triggerall = helper(198964),var(20) = 0
triggerall = var(50) = 3
triggerall = var(54) != -1
triggerall = StateNo != 2101
trigger1 = var(52) = 1
time = 1
color = Ceil(IfElse((var(55) = [(var(54)*4-2)+1,((var(54)*4-2)*2)]), 75, 255))
invertall = IfElse((var(55) = [(var(54)*4-2)+1,((var(54)*4-2)*2)]), 1, 0)
add = Ceil(IfElse(var(58) < 0, var(57), -1 * var(57))), Ceil(IfElse(var(58) < 0, var(57), -1 * var(57))), Ceil(IfElse(var(58) < 0, var(57), -1 * var(57)))
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(52) = 1
triggerall = var(53) = 1
trigger1 = RoundState = 0
var(56) = 0
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(52) = 1
triggerall = var(53) = 1
trigger1 = var(58) = 1
var(56) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(52) = 1
triggerall = var(53) = 1
trigger1 = var(55) >= (var(54)*4-2)*2       ;(208/13*4-2)*2
var(55) = 0
ignorehitpause = 1

[State -2]
type = VarAdd
triggerall = var(52) = 1
triggerall = var(53) = 1
trigger1 = var(56) = 1
var(55) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(52) = 1
triggerall = var(53) = 1
trigger1 = RoundState = 0
var(57) = 0
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(53) = 1
trigger1 = RoundState = 0
trigger2 = var(52) = 1
trigger2 = var(57) <= 0
trigger2 = var(58) = -1
var(58) = 0
ignorehitpause = 1

[State -2]
type = VarAdd
triggerall = var(53) = 1
triggerall = var(52) = 1
trigger1 = var(58) = 0
trigger2 = var(58) = -2
var(57) = floor(208/var(54))
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(53) = 1
triggerall = var(52) = 1
trigger1 = var(57) >= floor(208/var(54))*var(54)
trigger1 = var(58) = 0
var(58) = 1
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(53) = 1
triggerall = var(52) = 1
trigger1 = var(57) >= floor(208/var(54))*var(54)
trigger1 = var(58) = -2
var(58) = -1
ignorehitpause = 1

[State -2]
type = VarAdd
triggerall = var(53) = 1
triggerall = var(52) = 1
trigger1 = var(58) = 1
trigger2 = var(58) = -1
var(57) = -1*floor(208/var(54))
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = var(53) = 1
triggerall = var(52) = 1
trigger1 = var(57) <= 0
trigger1 = var(58) = 1
var(58) = -2
ignorehitpause = 1

[State -2, palfx shining cycle control]
type = VarSet
triggerall = helper(198964),var(20) = 0
trigger1 = var(50) = 3
triggerall = stateno != 1953
var(54) = 16


;-------------------------------
[State -2 ｵﾍｿﾕﾊﾜﾉ(ﾍﾑﾀ)]
type = SelfState
value = 340
;triggerall = var(59)
triggerall = alive
triggerall = helper(198964),var(27) = 1
triggerall = palno = 6
trigger1 = pos y > -40 && pos y < 0
trigger1 = vel y > 0
trigger1 = movetype = H
trigger1 = statetype = A
trigger2 = stateno = 5110
trigger3 = stateno = 5101

[State 0, ｻﾘﾆ
type = poweradd
Triggerall = palno = 6
trigger1 = Movetype = A
trigger1 = time = 0
trigger2 = gametime%12 = 0
value = 30
ignorehitpause = 1


